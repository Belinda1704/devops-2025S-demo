{% extends 'base.html' %}

{% block title %}Upcoming Events - Campus Notifier{% endblock %}

{% block content %}
<div class="container">
    <h1 style="margin-bottom: 1.5rem; color: #1D3124;">Upcoming Events</h1>
    
    {% if categories %}
    <div style="margin-bottom: 1.5rem;">
        <label for="category-filter" style="font-weight: bold; margin-right: 0.5rem; color: #1D3124;">Filter by Category:</label>
        <select id="category-filter" onchange="window.location.href='?category=' + this.value" style="padding: 0.5rem; border: 1px solid #BACEC1; border-radius: 4px; background-color: white; color: #1D3124;">
            <option value="">All Categories</option>
            {% for category in categories %}
                <option value="{{ category.id }}" {% if request.GET.category == category.id|stringformat:"s" %}selected{% endif %}>
                    {{ category.name }}
                </option>
            {% endfor %}
        </select>
    </div>
    {% endif %}
    
    {% if events %}
        <div class="event-list">
            {% for event in events %}
                <div class="event-card" style="border: 1px solid #BACEC1; border-radius: 8px; padding: 1.5rem; margin-bottom: 1rem; transition: box-shadow 0.3s, border-color 0.3s; background-color: white;">
                    <h2 style="color: #1D3124; margin-bottom: 0.5rem;">
                        <a href="{% url 'events:event_detail' event.id %}" style="color: #1D3124; text-decoration: none;">
                            {{ event.title }}
                        </a>
                    </h2>
                    
                    <div style="display: flex; flex-wrap: wrap; gap: 1rem; margin-bottom: 0.5rem; color: #1D3124; font-size: 0.95rem;">
                        <div style="display: flex; align-items: center; gap: 0.3rem;">
                            <strong>Date:</strong>
                            <span>{{ event.start_datetime|date:"M d, Y - g:i A" }}</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.3rem;">
                            <strong>Location:</strong>
                            <span>{{ event.location }}</span>
                        </div>
                        {% if event.category %}
                        <div style="display: flex; align-items: center; gap: 0.3rem;">
                            <span style="background-color: #BACEC1; color: #1D3124; padding: 0.2rem 0.6rem; border-radius: 4px; font-size: 0.85rem;">
                                {{ event.category.name }}
                            </span>
                        </div>
                        {% endif %}
                    </div>
                    
                    {% if event.description %}
                        <p style="color: #1D3124; margin-top: 0.5rem; opacity: 0.8;">
                            {{ event.description|truncatewords:30 }}
                        </p>
                    {% endif %}
                    
                    <div style="margin-top: 1rem;">
                        <a href="{% url 'events:event_detail' event.id %}" 
                           style="display: inline-block; background-color: #E59560; color: white; padding: 0.5rem 1.5rem; border-radius: 4px; text-decoration: none; transition: background-color 0.3s;">
                            View Details
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div style="text-align: center; padding: 3rem; background-color: #F6F4E8; border-radius: 8px; border: 1px solid #BACEC1;">
            <p style="font-size: 1.2rem; color: #1D3124;">
                No upcoming events found. Check back later!
            </p>
        </div>
    {% endif %}
</div>

<style>
    .event-card:hover {
        box-shadow: 0 4px 15px rgba(29, 49, 36, 0.15);
        border-color: #E59560;
    }
    
    .event-card a:hover {
        text-decoration: underline;
    }
    
    .event-card > div:last-child a:hover {
        background-color: #1D3124;
    }
</style>
{% endblock %}
